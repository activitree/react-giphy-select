{"version":3,"sources":["../../../src/components/GiphyList/index.js"],"names":["GiphyList","props","_theme","list","styles","listEmpty","listScrollbar","listScrollbarThumb","listMasonry","listItem","listEntry","listEntryImage","theme","_onScroll","bind","_onWheel","values","top","loadNextPage","e","_scrollbars","getValues","clientHeight","scrollHeight","scrollTop","deltaY","stopPropagation","scrollToBottom","items","onEntrySelect","length","element","map","entry","index","images","fixed_width_small","url","id","renderEntry","Component","defaultProps","onSelect","options","width","height","backgroundImage","fixed_width_small_still","propTypes","PropTypes","shape","string","arrayOf","object","isRequired","func"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { Scrollbars } from 'react-custom-scrollbars-2'\nimport Masonry from '@activitree/react-masonry-component'\nimport styles from './styles.css'\n\nexport default class GiphyList extends Component {\n  constructor (props) {\n    super(props)\n    this._theme = {\n      list: styles.list,\n      listEmpty: styles.listEmpty,\n      listScrollbar: styles.listScrollbar,\n      listScrollbarThumb: styles.listScrollbarThumb,\n      listMasonry: styles.listMasonry,\n      listItem: styles.listItem,\n      listEntry: styles.listEntry,\n      listEntryImage: styles.listEntryImage,\n      ...this.props.theme,\n    }\n    this._onScroll = this._onScroll.bind(this)\n    this._onWheel = this._onWheel.bind(this)\n  }\n\n  _onScroll (values) {\n    if (values.top === 1) {\n      this.props.loadNextPage()\n    }\n  }\n\n  _onWheel (e) {\n    // Disable page scroll, but enable gifs scroll\n    const { clientHeight, scrollHeight, scrollTop } = this._scrollbars.getValues()\n    if (e.deltaY > 0) {\n      if (scrollTop < scrollHeight - clientHeight - e.deltaY) {\n        e.stopPropagation()\n      } else {\n        this._scrollbars.scrollToBottom()\n      }\n    } else {\n      if (scrollTop > -e.deltaY) { // eslint-disable-line no-lonely-if\n        e.stopPropagation()\n      } else {\n        this._scrollbars.scrollTop()\n      }\n    }\n  }\n\n  render() {\n    const { items, onEntrySelect } = this.props\n    const theme = this._theme\n    return (\n      <div className={items.length ? theme.list : theme.listEmpty} onWheel={this._onWheel}>\n        <Scrollbars onScrollFrame={this._onScroll} renderTrackVertical={() => (\n            <div className={theme.listScrollbar} />\n          )}\n          renderThumbVertical={props => (\n            <div {...props} className={theme.listScrollbarThumb} />\n          )}\n          hideTracksWhenNotNeeded\n          ref={element => { this._scrollbars = element }}\n        >\n          <Masonry className={theme.listMasonry} role=\"listbox\">\n            {items.map((entry, index) => {\n              if (entry.images && entry.images.fixed_width_small && entry.images.fixed_width_small.url) {\n                return (\n                  <div key={`${index}${entry.id}`} className={theme.listItem}>\n                    {this.props.renderEntry(entry, onEntrySelect, { theme })}\n                  </div>\n                  )\n              }\n            }\n            )}\n          </Masonry>\n        </Scrollbars>\n      </div>\n    )\n  }\n}\n\nGiphyList.defaultProps = {\n  theme: {},\n  renderEntry: (entry, onSelect, options) => (\n    <button\n      className={options.theme.listEntry}\n      style={{\n        width: `${entry.images.fixed_width_small.width}px`,\n        height: `${entry.images.fixed_width_small.height}px`,\n        backgroundImage: `url(${entry.images.fixed_width_small_still.url})`,\n      }}\n      onClick={() => onSelect(entry)}\n      role=\"option\"\n      aria-selected>\n      <img\n        className={options.theme.listEntryImage}\n        src={entry.images.fixed_width_small.url}\n        width={entry.images.fixed_width_small.width}\n        height={entry.images.fixed_width_small.height}\n        // alt={entry.slug}\n      />\n    </button>\n  ),\n  onEntrySelect: () => {}\n}\n\nGiphyList.propTypes = {\n  theme: PropTypes.shape({\n    list: PropTypes.string,\n    listScrollbar: PropTypes.string,\n    listScrollbarThumb: PropTypes.string,\n    listMasonry: PropTypes.string,\n    listItem: PropTypes.string,\n    listEntry: PropTypes.string,\n    listEntryImage: PropTypes.string,\n  }),\n  items: PropTypes.arrayOf(PropTypes.object).isRequired,\n  renderEntry: PropTypes.func,\n  onEntrySelect: PropTypes.func,\n  loadNextPage: PropTypes.func.isRequired,\n}\n"],"file":"index.js"}